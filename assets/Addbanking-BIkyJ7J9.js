import{K as q,y as v,r as d,j as e,M as l,as as A,L as T,F as s,I as w,S as L,J as G}from"./index-CH8Zc4uo.js";const F=()=>{const{register:t,handleSubmit:y,setValue:g,watch:b,reset:N,formState:{errors:r}}=q(),k=v(),[o,u]=d.useState("Bank"),[m,x]=d.useState(!1),[C,p]=d.useState(!1),[c,n]=d.useState({type:"",message:""}),S=localStorage.getItem("user_id"),_=localStorage.getItem("token"),f=async a=>{var h,j;const B={bd_acc_type:a.accountType,bd_acc_name:a.accountName,bd_acc_code:a.accountCode,bd_acc_currency:a.currency,bd_acc_number:a.accountNumber,bd_acc_bank_name:a.bankName,bd_acc_ifsc:a.ifsc,bd_acc_description:a.description,bd_acc_primary:a.primary==="0"?0:1};x(!0);try{const i=await G.post("https://lunarsenterprises.com:5016/crm/add/bank-details",B,{headers:{Authorization:`Bearer ${_}`,user_id:S}});i.data.result?(n({type:"success",message:"Bank details added successfully"}),N(),setTimeout(()=>{n(!1),k("/dashboard/Banking")},3e3)):n({type:"error",message:i.data.message})}catch(i){n({type:"error",message:((j=(h=i.response)==null?void 0:h.data)==null?void 0:j.message)||"An error occurred"})}finally{p(!0),x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(l,{show:C,onHide:()=>p(!1),centered:!0,children:[e.jsx(l.Header,{closeButton:!0,children:e.jsxs(l.Title,{children:[e.jsx("img",{src:c.type==="success"?A:T,alt:c.type,style:{width:"30px",marginRight:"10px"}}),c.type==="success"?"Success":"Warning"]})}),e.jsx(l.Body,{children:e.jsx("p",{children:c.message})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{children:"Add Bank or Credit Card"}),e.jsxs(s,{onSubmit:y(f),children:[e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"text-danger",children:"Select Account Type*"}),e.jsxs("div",{children:[e.jsx(s.Check,{inline:!0,label:"Bank",type:"radio",value:"Bank",...t("accountType",{required:!0}),checked:o==="Bank",onChange:()=>u("Bank")}),e.jsx(s.Check,{inline:!0,label:"Credit Card",type:"radio",value:"Credit Card",...t("accountType",{required:!0}),checked:o==="Credit Card",onChange:()=>u("Credit Card")})]}),r.accountType&&e.jsx("span",{className:"text-danger",children:"This field is required"})]}),e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{className:"text-danger",children:"Account Name*"}),e.jsx(s.Control,{type:"text",...t("accountName",{required:"Bank Name is required",pattern:{value:/^[A-Za-z\s]+$/,message:"Only letters are allowed"}})}),r.accountName&&e.jsx("span",{className:"text-danger mt-1",children:r.accountName.message})]}),e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{children:"Account Code"}),e.jsx(s.Control,{type:"text",...t("accountCode",{required:!0})}),r.accountCode&&e.jsx("span",{className:"text-danger",children:"Account Code is required"})]}),e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{className:"text-danger",children:"Currency*"}),e.jsxs(s.Select,{...t("currency",{required:!0}),children:[e.jsx("option",{value:"INR",children:"INR"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]}),r.currency&&e.jsx("span",{className:"text-danger",children:"This field is required"})]}),o==="Bank"&&e.jsxs(e.Fragment,{children:[e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{children:"Account Number"}),e.jsx(s.Control,{type:"text",...t("accountNumber",{required:"Account Number is required",pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}})}),r.accountNumber&&e.jsx("span",{className:"text-danger",children:r.accountNumber.message})]}),e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{children:"IFSC"}),e.jsx(s.Control,{type:"text",...t("ifsc",{required:!0})}),r.ifsc&&e.jsx("span",{className:"text-danger",children:"IFSC Code is required"})]})]}),e.jsxs(s.Group,{className:"mt-3",children:[e.jsx(s.Label,{children:"Bank Name"}),e.jsx(s.Control,{type:"text",...t("bankName",{required:"Bank Name is required",pattern:{value:/^[A-Za-z\s]+$/,message:"Only letters are allowed"}})}),r.bankName&&e.jsx("span",{className:"text-danger mt-1",children:r.bankName.message})]}),e.jsx(s.Group,{className:"mt-3 mb-5",children:e.jsx(s.Check,{label:"Make this primary",type:"checkbox",...t("primary"),onChange:a=>g("primary",a.target.checked?"0":"1"),checked:b("primary")==="0"})}),e.jsx(w,{variant:"primary",type:"submit",className:"w-100",disabled:m,children:m?e.jsx(L,{animation:"border",size:"sm"}):"Save"})]})]})]})};export{F as default};
