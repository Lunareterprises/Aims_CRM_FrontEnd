import{y as se,r as i,J as z,j as e,I as l,ab as $,M as j}from"./index-DrVvHqz2.js";/* empty css                */import"./auto-BQWiz-ae.js";import{F as g,i as H,h as V}from"./index-iouWdBkM.js";import{D as t}from"./Dropdown-DbOS3XSX.js";import{m as v}from"./proxy-C-0xK_ng.js";import{I as G}from"./InputGroup-BLlZLli6.js";import{T as J}from"./Table-s43sl0B-.js";import{B as o}from"./Badge-COzbueJH.js";import{P as c}from"./Pagination-hmh3hjt5.js";import{A as te}from"./Alert-DsoEVQTX.js";import"./chart-AX0MVKq8.js";import"./NavbarContext-BKT10AM6.js";import"./DefaultLayout-DtrOhwyG.js";import"./index.esm-inB2Qwxe.js";import"./Container-CjhMRWTD.js";import"./hook-CofurlfM.js";import"./Anchor-DE1JVu7L.js";import"./InputGroupContext-DmE-SB0_.js";const fe=()=>{const I=se(),S=localStorage.getItem("user_id"),k=localStorage.getItem("token"),[h,C]=i.useState([]),[n,R]=i.useState(1),[ae,Y]=i.useState(0),[m,Z]=i.useState(0),[p]=i.useState(13),[x,q]=i.useState(""),[w,A]=i.useState(!1);i.useEffect(()=>{u()},[]);const u=async(s=1,a="")=>{A(!0);try{const r=await z.post("https://lunarsenterprises.com:5016/crm/list/bank-details",{page_no:s,limit:p,search:a},{headers:{Authorization:`Bearer ${k}`,user_id:S}});r.data.result===!0?(C(r.data.list),Y(r.data.total_count),Z(Math.ceil(r.data.total_count/p)),R(s)):(console.error(r.data.message),C([]))}catch(r){console.error("Error fetching products:",r)}finally{A(!1)}},P=()=>{I("/dashboard/Addbanking")},d=s=>{s>0&&s<=m&&u(s,x)},B=s=>{q(s.target.value),u(1,s.target.value)};i.useState("");const[Q,N]=i.useState(!1),[U,T]=i.useState(null),y=s=>{T(s),N(!0)},F=()=>{N(!1),T(null)},W=async()=>{try{const s={bd_id:U},a=await z.post("https://lunarsenterprises.com:5016/crm/delete/bank-details",s,{headers:{Authorization:`Bearer ${k}`,user_id:S}});console.log(a),a.data.result===!0?(N(!1),u()):toast.error(a.data.message)}catch(s){console.error("Error fetching data:",s)}},[K,X]=i.useState("All"),[E,ee]=i.useState("Sort By"),[M,_]=i.useState(!1),[D,f]=i.useState(!1),L=s=>{X(s),_(!1)},O=s=>{ee(s),f(!1)},b=s=>{I(`/dashboard/Bankingview/${s}`)};return e.jsxs(e.Fragment,{children:[h.length===0?x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"spacemanger ",children:[e.jsxs(t,{onToggle:s=>_(s),onSelect:L,children:[e.jsx(t.Toggle,{className:"dropdownitem",children:K}),M&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:" show",children:e.jsxs(t.Menu,{show:!0,className:"mt-5",children:[e.jsx(t.Item,{eventKey:"All",children:"All"}),e.jsx(t.Item,{eventKey:"Active",children:"Active"}),e.jsx(t.Item,{eventKey:"Inactive",children:"Inactive"})]})})]}),e.jsxs("div",{className:"d-md-flex justify-content-end align-items-center col-md-4",children:[e.jsxs(l,{className:"mb-3 bgaditem",type:"submit",onClick:P,children:[e.jsx("i",{className:"fa fa-plus","aria-hidden":"true"})," Add New Bank"]}),e.jsxs(t,{className:"ms-md-3 mb-3",onToggle:s=>f(s),onSelect:O,children:[e.jsx(t.Toggle,{className:"dropdownitem",children:E}),D&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:" show",children:e.jsxs(t.Menu,{className:"mt-5",show:!0,children:[e.jsx(t.Item,{eventKey:"importitems",children:"Import Items"}),e.jsx(t.Item,{eventKey:"exportitems",children:"Export Items"}),e.jsx(t.Item,{eventKey:"Inactive",children:"Inactive"})]})})]})]})]}),e.jsx("div",{className:"col-6 ",children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:" ",children:e.jsx(G,{className:" ",children:e.jsx($,{className:"searchcolor",placeholder:"Search Bank ...",value:x,onChange:B})})}),e.jsx("div",{className:"col-6 ",children:e.jsx("div",{className:""})})]})}),e.jsxs("div",{children:[e.jsxs(J,{striped:!0,bordered:!0,responsive:!0,hover:!0,className:"mt-4 table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"tablehead",children:[e.jsx("th",{children:"SL"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Currency"}),e.jsx("th",{children:"Account Number"}),e.jsx("th",{children:"Bank Name"}),e.jsx("th",{children:"IFSC"}),e.jsx("th",{children:"Primary"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"View"})]})}),e.jsx("tbody",{className:"tablehead",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):h.length>0?h.map((s,a)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"tablehead me-3",children:[" ",(n-1)*p+a+1]}),e.jsx("td",{children:s.bd_acc_type}),e.jsx("td",{children:s.bd_acc_name}),e.jsx("td",{children:s.bd_acc_code}),e.jsx("td",{children:s.bd_acc_currency}),e.jsx("td",{children:s.bd_acc_number}),e.jsx("td",{children:s.bd_acc_bank_name}),e.jsx("td",{children:s.bd_acc_ifsc}),e.jsx("td",{children:s.bd_acc_primary?e.jsx(o,{bg:"success",children:"Primary"}):e.jsx(o,{bg:"secondary",children:"No"})}),e.jsx("td",{children:e.jsx(o,{bg:s.bd_acc_status==="active"?"info":"danger",children:s.bd_acc_status})}),e.jsx("td",{className:"",children:e.jsx(l,{onClick:r=>{r.stopPropagation(),y(s.bd_id)},children:e.jsx(g,{icon:H,color:"red",style:{cursor:"pointer"},onClick:r=>{r.stopPropagation(),y(s.bd_id)}})})}),e.jsx("td",{className:"",children:e.jsx(l,{className:"me-2",onClick:()=>{b(s.bd_id)},children:e.jsx(g,{icon:V,style:{cursor:"pointer"},onClick:()=>{b(s.bd_id)}})})})]},s.bd_id)):e.jsx(e.Fragment,{})})]}),e.jsx("div",{className:"centree",children:e.jsxs(c,{children:[e.jsx(c.Prev,{onClick:()=>d(n-1),disabled:n===1}),e.jsx("div",{className:"paginationaldes",children:Array.from({length:m},(s,a)=>e.jsx(c.Item,{active:a+1===n,onClick:()=>d(a+1),children:a+1},a+1))}),e.jsx(c.Next,{onClick:()=>d(n+1),disabled:n===m})]})})]}),e.jsxs(te,{variant:"warning",className:"text-center",children:['No results found for "',x]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"banking-container",children:[e.jsx("h2",{children:"Stay on top of your money"}),e.jsx("p",{children:"Connect your bank and credit cards to fetch all your transactions. Create, categorize and match these transactions to those you have in Zoho Books."}),e.jsx("div",{className:"button-group",children:e.jsx("button",{className:"connect-button",children:e.jsx("a",{href:"/dashboard/Addbanking",className:"text-white",children:"Add Manually"})})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"spacemanger ",children:[e.jsxs(t,{onToggle:s=>_(s),onSelect:L,children:[e.jsx(t.Toggle,{className:"dropdownitem",children:K}),M&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:" show",children:e.jsxs(t.Menu,{show:!0,className:"mt-5",children:[e.jsx(t.Item,{eventKey:"All",children:"All"}),e.jsx(t.Item,{eventKey:"Active",children:"Active"}),e.jsx(t.Item,{eventKey:"Inactive",children:"Inactive"})]})})]}),e.jsxs("div",{className:"d-md-flex justify-content-end align-items-center col-md-4",children:[e.jsxs(l,{className:"mb-3 bgaditem",type:"submit",onClick:P,children:[e.jsx("i",{className:"fa fa-plus","aria-hidden":"true"})," Add New Bank"]}),e.jsxs(t,{className:"ms-md-3 mb-3",onToggle:s=>f(s),onSelect:O,children:[e.jsx(t.Toggle,{className:"dropdownitem",children:E}),D&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:" show",children:e.jsxs(t.Menu,{className:"mt-5",show:!0,children:[e.jsx(t.Item,{eventKey:"importitems",children:"Import Items"}),e.jsx(t.Item,{eventKey:"exportitems",children:"Export Items"}),e.jsx(t.Item,{eventKey:"Inactive",children:"Inactive"})]})})]})]})]}),e.jsx("div",{className:"col-6 ",children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:" ",children:e.jsx(G,{className:" ",children:e.jsx($,{className:"searchcolor",placeholder:"Search Bank ...",value:x,onChange:B})})}),e.jsx("div",{className:"col-6 ",children:e.jsx("div",{className:""})})]})}),e.jsxs("div",{children:[e.jsxs(J,{striped:!0,bordered:!0,responsive:!0,hover:!0,className:"mt-4 table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"tablehead",children:[e.jsx("th",{children:"SL"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Currency"}),e.jsx("th",{children:"Account Number"}),e.jsx("th",{children:"Bank Name"}),e.jsx("th",{children:"IFSC"}),e.jsx("th",{children:"Primary"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"View"})]})}),e.jsx("tbody",{className:"tablehead",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"Loading..."})}):h.length>0?h.map((s,a)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"tablehead me-3",children:[" ",(n-1)*p+a+1]}),e.jsx("td",{children:s.bd_acc_type}),e.jsx("td",{children:s.bd_acc_name}),e.jsx("td",{children:s.bd_acc_code}),e.jsx("td",{children:s.bd_acc_currency}),e.jsx("td",{children:s.bd_acc_number}),e.jsx("td",{children:s.bd_acc_bank_name}),e.jsx("td",{children:s.bd_acc_ifsc}),e.jsx("td",{children:s.bd_acc_primary?e.jsx(o,{bg:"success",children:"Primary"}):e.jsx(o,{bg:"secondary",children:"No"})}),e.jsx("td",{children:e.jsx(o,{bg:s.bd_acc_status==="active"?"info":"danger",children:s.bd_acc_status})}),e.jsx("td",{className:"",children:e.jsx(l,{className:"",onClick:r=>{r.stopPropagation(),y(s.bd_id)},children:e.jsx(g,{icon:H,style:{cursor:"pointer"},onClick:r=>{r.stopPropagation(),y(s.bd_id)}})})}),e.jsx("td",{className:"",children:e.jsx(l,{className:"me-2",onClick:()=>{b(s.bd_id)},children:e.jsx(g,{icon:V,style:{cursor:"pointer"},onClick:()=>{b(s.bd_id)}})})})]},s.bd_id)):e.jsx(e.Fragment,{})})]}),e.jsx("div",{className:"centree",children:e.jsxs(c,{children:[e.jsx(c.Prev,{onClick:()=>d(n-1),disabled:n===1}),e.jsx("div",{className:"paginationaldes",children:Array.from({length:m},(s,a)=>e.jsx(c.Item,{active:a+1===n,onClick:()=>d(a+1),children:a+1},a+1))}),e.jsx(c.Next,{onClick:()=>d(n+1),disabled:n===m})]})})]})]}),e.jsxs(j,{show:Q,onHide:F,children:[e.jsx(j.Header,{closeButton:!0,children:e.jsx(j.Title,{children:"Confirm Deletion"})}),e.jsx(j.Body,{children:"Are you sure you want to delete this Bank Details?"}),e.jsxs(j.Footer,{children:[e.jsx(l,{variant:"secondary",onClick:F,children:"No"}),e.jsx(l,{variant:"danger",onClick:W,children:"Yes, Delete"})]})]})]})};export{fe as default};
